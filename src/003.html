<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>003 chatroom</title>
    <script src="https://kit.fontawesome.com/699f943a60.js" crossorigin="anonymous"></script>
    <style>
        body {
            font-family: Microsoft JhengHei;
            font-weight: 800;
            font-size: 1.1rem;
        }

        .wrapper {
            width: 100%;
            height: 100%;
        }

        .nav-container {
            height: 50px;
            width: 100%;
            border-bottom: 1px solid rgba(142, 186, 243, 0.9);
            align-items: center;
            display: flex;
            background-color: rgba(142, 186, 243, 0.7);
        }

        .nav-left-container {
            width: 50%;
        }

        .nav-right-container {
            display: flex;
            flex-direction: row-reverse;
            width: 50%;
            align-items: center;
        }

        .nav-right-item:first-child {
            margin-right: 10px;

        }

        .nav-right-item {
            margin-left: 20px;
        }

        .left-icon {
            margin-left: 10px;
        }

        .user-name {
            margin-left: 8px;
            color: black;
            font-weight: 800;
        }

        .main-container {
            height: 600px;
            background-color: rgba(142, 186, 243, 0.7);
        }

        .msg-wrapper {
            padding-top: 5px;
            padding-bottom: 5px;
        }

        .right-msg-wrapper {
            display: flex;
            flex-direction: row-reverse;
        }

        .msg-text {
            padding: 6px;
            max-width: 50%;
            border-radius: 10px;
            word-wrap: break-word;
        }

        .right-msg-text {
            margin-right: 6px;
            background-color: rgba(157, 230, 148, 0.9);
        }

        .left-msg-wrapper {
            display: flex;
            flex-direction: row;
        }

        .left-msg-text {
            margin-left: 7px;
            background-color: white;
        }

        .status-wrapper {
            position: relative;
        }

        .left-msg-status-wrapper {
            display: flex;
            flex-direction: column;
            margin-top: auto;
            margin-left: 6px;
        }

        .right-msg-status-wrapper {
            margin-right: 8px;
            text-align: right;
            display: flex;
            flex-direction: column;
            margin-top: auto;
        }

        .status-text {
            color: rgba(61, 87, 124, 0.9);
            font-size: 0.8rem;
        }

        .user-img {
            width: 30px;
            height: 35px;
            margin-left: 5px;
        }
    </style>
</head>

<body>
    <div id="root">
        <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/react@17/umd/react.development.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/react-dom@17/umd/react-dom.development.js"></script>
        <script type="text/babel">

            const { useState, useEffect, useRef } = React;
            const App = () => {
                const [msgList, setMsgList] = useState([])

                const NavArea = () => {

                    return (
                        <div className={'nav-container'}>
                            <div className={'nav-left-container'}>
                                <i className="fa-solid fa-chevron-left left-icon"></i>
                                <span className="user-name">Chicardo</span>
                            </div>
                            <div className={"nav-right-container"}>
                                <i className="fas fa-list nav-right-item"></i>
                                <i className="fas fa-phone nav-right-item"></i>
                                <i className="fas fa-search nav-right-item"></i>
                            </div>
                        </div >

                    )
                }

                const RightMessage = (props) => {

                    return (
                        <div className={'msg-wrapper right-msg-wrapper'}>
                            <div className="msg-text right-msg-text">{props.msg}</div>
                            <div className="right-msg-status-wrapper status-text">
                                <div>{props.status}</div>
                                <div>{props.date}</div>
                            </div>
                        </div>
                    )
                }

                const LeftMessage = (props) => {

                    return (
                        <div className={'msg-wrapper left-msg-wrapper'}>
                            <img src="image/user.jpg" className="user-img"></img>
                            <div className="msg-text left-msg-text">{props.msg}</div>
                            <div className="left-msg-status-wrapper status-text">
                                <div>{props.date}</div>
                            </div>
                        </div>
                    )
                }

                useEffect(() => {

                    const msgs = [
                        { user: "me", msg: "Hi 下涵", status: "已讀", date: "上午 10:51" },
                        { user: "me", msg: "你想去哪裡玩", status: "已讀", date: "上午 10:51" },
                        { user: "ricardo", msg: "我嗎", status: "已讀", date: "上午 10:52" },
                        { user: "ricardo", msg: "好想去美國好想去美國好想去美國好想去美國好想去", status: "已讀", date: "上午 10:52" }
                    ]
                    setMsgList(msgs)

                }, [])

                return (
                    <div className={"wrapper"}>

                        <NavArea />

                        <div className={'main-container'}>

                            {msgList.map((msgItem, index) => {
                                if (msgItem.user === "me")
                                    return <RightMessage msg={msgItem.msg} status={msgItem.status} date={msgItem.date} id={index} />

                                return <LeftMessage msg={msgItem.msg} date={msgItem.date} id={index} />
                            })}
                        </div>
                    </div >
                );
            };

            ReactDOM.render(<App />, document.getElementById('root'));
        </script>
    </div>
</body>

</html>